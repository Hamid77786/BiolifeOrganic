@using BiolifeOrganic.Bll.ViewModels.WebContact
@using BiolifeOrganic.Dll.DataContext.Entities
@model List<WebContactViewModel>
@Html.AntiForgeryToken()


<div class="row mb-3">
    <div class="col-md-3">
        <select id="contactTypeFilter" class="form-control">
            <option value="">All</option>
            <option value="Web">Web</option>
            <option value="Transport">Transport</option>
        </select>
    </div>
    <div class="col-md-2">
        <button type="button" class="btn btn-primary" onclick="filterByOption()">Filter</button>
    </div>
    <div class="col-md-3">
        <a class="btn btn-success" asp-controller="WebContact" asp-action="Create">Add Web Contact</a>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <h4 class="card-title">Web Contacts</h4>
        <div class="table-responsive pt-3" id="contactsTable">
            <table class="table table-bordered table-hover">
                <thead class="thead-light">
                    <tr>
                        <th>#</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Address</th>
                        <th>Schedule</th>
                        <th>Type</th>
                        <th>Default</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model != null && Model.Any())
                    {
                        int index = 1;
                        foreach (var item in Model)
                        {
                            <tr id="contactRow_@item.Id">
                                <td>@index</td>
                                <td>@item.EmailAgree</td>
                                <td>@item.PhoneNumber</td>
                                <td>@item.Address</td>
                                <td>@item.Schedule</td>
                                <td>@item.ContactOption</td>
                                <td>
                                    <div class="progress" style="height: 20px;">
                                        <div class="progress-bar @(item.IsDefault ? "bg-success" : "bg-secondary")"
                                             role="progressbar"
                                             style="width:100%"
                                             aria-valuenow="100"
                                             aria-valuemin="0"
                                             aria-valuemax="100">
                                            @(item.IsDefault ? "Default" : "")
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <a class="btn btn-sm btn-primary mb-1" asp-controller="WebContact" asp-action="Update" asp-route-id="@item.Id">Update</a>
                                    <button type="button" class="btn btn-sm btn-danger mb-1" onclick="deleteWebContact(@item.Id, this)">Delete</button>
                                    <button type="button"
                                            class="btn btn-sm btn-success mb-1"
                                            onclick="setDefault(@item.Id, @((int)item.ContactOption))">
                                        Set Default
                                    </button>

                                </td>
                            </tr>
                            index++;
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="8" class="text-center">No contacts found.</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

