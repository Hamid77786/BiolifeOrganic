@using BiolifeOrganic.Bll.ViewModels.Shop
 @model ShopViewModel
<!--Navigation section-->
<div class="container">
    <nav class="biolife-nav">
        <ul>
            <li class="nav-item"><a asp-controller="home">Home</a></li>
            <li class="nav-item"><span class="current-page">Shop</span></li>
        </ul>
    </nav>
</div>
<div class="page-contain category-page no-sidebar">
    <div class="container">
        <div class="row">

            <!-- Main content -->
            <div id="main-content" class="main-content col-lg-12 col-md-12 col-sm-12 col-xs-12">


                <div class="product-category grid-style">

                    <div id="top-functions-area" class="top-functions-area">
                        <div class="flt-item to-left group-on-mobile">
                            <span class="flt-title">Refine</span>
                            <a href="#" class="icon-for-mobile">
                                <span></span>
                                <span></span>
                                <span></span>
                            </a>
                            <div class="wrap-selectors">
                                <form asp-controller="shop" asp-action="index" name="frm-refine" method="get" style="display:flex; align-items:center; gap:10px;">
                                    <span class="title-for-mobile">Refine Products By</span>
                                    <div data-title="Price:" class="selector-item">
                                       
                                        <select asp-for="PriceFilter" name="price" class="selector">
                                            <option value="all">Price</option>
                                            <option value="class-1st">Less than 5₼</option>
                                            <option value="class-2nd">₼5-10₼</option>
                                            <option value="class-3rd">₼10-20₼</option>
                                            <option value="class-4th">₼20-45₼</option>
                                            <option value="class-5th">₼45-100₼</option>
                                            <option value="class-6th">₼100-150₼</option>
                                            <option value="class-7th">More than 150₼</option>
                                        </select>


                                    </div>
                                    <div data-title="Avalability:" class="selector-item">
                                        <select name="availability" class="selector">
                                            <option value="all">Availability</option>
                                            <option value="in">In stock</option>
                                            <option value="out">Out of stock</option>
                                            <option value="IsOnSale">On Sale</option>
                                            <option value="IsRated">Rated</option>
                                        </select>
                                    </div>
                                    
                                    <div class="submit-box">
                                        <button type="submit" class="btn-submit">
                                            <i class="fa fa-filter"></i> Apply
                                        </button>
                                    </div>

                                   

                                    


                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <ul class="products-list">
                            @if (Model.PagedProducts != null && Model.PagedProducts.Any())
                            {
                                @foreach (var item in Model.PagedProducts!)
                                {
                                    <li class="product-item col-lg-2 col-md-3 col-sm-4 col-xs-6">
                                        <div class="contain-product layout-default">
                                            <div class="product-thumb">
                                                <a asp-controller="shop" asp-action="detail" asp-route-id="@item.Id" class="link-to-product">
                                                    <img src="~/images/products/@item.ImageUrl" alt="dd" width="270" height="270" class="product-thumnail">
                                                </a>
                                            </div>
                                            <div class="info">
                                                <b class="categories">@item.CategoryName</b>
                                                <h4 class="product-title"><a href="#" class="pr-name">@item.Name</a></h4>
                                                <div class="price">
                                                    <ins><span class="price-amount"><span class="currencySymbol"> ₼</span>@item.DiscountedPrice</span></ins>
                                                    <del><span class="price-amount"><span class="currencySymbol"> ₼</span>@item.OriginalPrice</span></del>
                                                </div>
                                                <div class="shipping-info">
                                                    <p class="shipping-day">3-Day Shipping</p>
                                                    <p class="for-today">Pree Pickup Today</p>
                                                </div>
                                                <div class="slide-down-box">
                                                    <p class="message">All products are carefully selected to ensure food safety.</p>
                                                    
                                                    <div class="buttons">
                                                        <a id="wish-@item.Id"
                                                           class="btn wishlist-btn @(item.IsInWishlist ? "active" : "")"
                                                           onclick="toggleWishlist(@item.Id)">
                                                            <i class="fa fa-heart" aria-hidden="true"></i>
                                                        </a>


                                                        <a href="javascript:void(0)"
                                                           class="btn add-to-cart-btn"
                                                           onclick="addToBasket(@item.Id)">
                                                            <i class="fa fa-cart-arrow-down" aria-hidden="true"></i> add to cart
                                                        </a>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                }


                            }

                        </ul>
                    </div>

                    @if (Model.Pagination != null && Model.Pagination.TotalPagesProducts > 1)
                    {
                        <div class="biolife-panigations-block version-2">
                            <ul class="panigation-contain">
                                @if (Model.Pagination.HasPreviousProducts)
                                {
                                    <li>
                                        <a class="link-page prev"
                                           asp-action="Index"
                                           asp-route-page="@(Model.Pagination.CurrentPage - 1)"
                                           asp-route-price="@Model.PriceFilter"
                                           asp-route-availability="@Model.AvailableFilter">
                                            <i class="fa fa-angle-left"></i>
                                        </a>
                                    </li>
                                }

                                @for (int i = 1; i <= Model.Pagination.TotalPagesProducts; i++)
                                {
                                    if (i == Model.Pagination.CurrentPage)
                                    {
                                        <li><span class="current-page">@i</span></li>
                                    }
                                    else
                                    {
                                        <li>
                                            <a class="link-page"
                                               asp-action="Index"
                                               asp-route-page="@i"
                                               asp-route-price="@Model.PriceFilter"
                                               asp-route-availability="@Model.AvailableFilter">
                                                @i
                                            </a>
                                        </li>
                                    }
                                }

                                @if (Model.Pagination.HasNextProducts)
                                {
                                    <li>
                                        <a class="link-page next"
                                           asp-action="Index"
                                           asp-route-page="@(Model.Pagination.CurrentPage + 1)"
                                           asp-route-price="@Model.PriceFilter"
                                           asp-route-availability="@Model.AvailableFilter">
                                            <i class="fa fa-angle-right"></i>
                                        </a>
                                    </li>
                                }
                            </ul>
                        </div>
                    }


                </div>

            </div>

        </div>
    </div>
</div>